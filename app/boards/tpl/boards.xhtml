<tal:block metal:define-macro="postbox">
    <div class="postform">
        <form method="post" id="postform" action="${imgbb/base_url}/index.php?app=boards&mod=posting&action=process">
            <ul>
                <li>
                    <input name="postername" id="postername" type="text" value="Poster Name" /><input name="goAnon" id="goanon" type="button" value="Go Anon!" /><a href="#" onclick="Display help"><span class="helpme">?</span></a>
                    <div id="" class="helphover" style="display: none;">
                        <div>Help text</div>
                    </div>
                </li>
                <li>
                    <select name="names">
                        <option value="option1">Option 1</option>
                    </select>
                </li>
                <li>
                    <input name="email" id="email" type="text" value="Poster Email" /><label for="email">this_was_empty_body_xml_complained</label><a href="#" onclick="Display help"><span class="helpme">?</span></a>
                    <div id="" class="helphover" style="display: none;">
                        <div>Help text</div>
                    </div>
                </li>
                <li>
                    <input name="subject" id="subject" type="text" value="Poster Subject" /><label for="subject">this_was_empty_body_xml_complained</label><a href="#" onclick="Display help"><span class="helpme">?</span></a>
                    <div id="" class="helphover" style="display: none;">
                        <div>Help text</div>
                    </div>
                </li>
                <li>
                    <textarea name="body" id="body">Post here</textarea><a href="#" onclick="Display help"><span class="helpme">?</span></a>
                    <div id="" class="helphover" style="display: none;">
                        <div>Help text</div>
                    </div>
                </li>
                <li>
                    <input name="file" id="file" type="file" value="Poster File upload" /><a href="#" onclick="Display help"><span class="helpme">?</span></a>
                    <div id="" class="helphover" style="display: none;">
                        <div>Help text</div>
                    </div>
                </li>
                <li>
                    <input name="embed" id="embed" type="text" value="Embed" /><a href="#" onclick="Display help"><span class="helpme">?</span></a>
                    <div id="" class="helphover" style="display: none;">
                        <div>Help text</div>
                    </div>
                </li>
                <li>
                    <input name="password" id="password" type="password" value="Poster Password" /><a href="#" onclick="Display help"><span class="helpme">?</span></a>
                    <div id="" class="helphover" style="display: none;">
                        <div>Help text</div>
                    </div>
                </li>
            </ul>
            <input type="submit" name="submit" id="submit" value="Post" onclick="function" />
        </form>
    </div>
</tal:block>

<tal:block metal:define-macro="boards_debug">
dumping array imgbb info<br /><hr />
<tal:block tal:repeat="var imgbb">
    <tal:block tal:condition="php: is_array(var)">
        <div style="border:2px solid; max-width:600px;">
            <b>imgbb['${repeat/var/key}']</b><br />
            <tal:block tal:repeat="v var">
                ${repeat/v/key} => ${v}<br />
            </tal:block>
        </div>

    </tal:block>
    <tal:block tal:condition="php: !is_array(var)">
        ${repeat/var/key}=> ${var}<br />
    </tal:block>
</tal:block>
<hr />
</tal:block>

<tal:block metal:define-macro="thread">
    <div class="board">
        <div id="${parent/id}" class="thread" >
            <div class="postcontainer" tal:repeat="post posts">
                <div id="${post/id}" class="post op" tal:attributes="class php: posts.key() == 1 ? 'post op' : 'post reply'">
                    <div class="file" tal:condition="post/file">
                        <div class="fileinfo">
                                <span class="filetext">
                                    File:
                                    <a href="${imgbb/base_url}/files/src/${post/file}.${post/file_type}">
                                        ${post/file}.${post/file_type}
                                    </a>
                                    ${structure string: &ndash;} (${post/file_size}, ${post/image_h}x${post/image_w}, ${post/file_original}.${post/file_type})
                                </span>
                        </div>
                        <a class="filethumb" target="_blank" href="${imgbb/base_url}/files/src/${post/file}.${post/file_type}">
                            <img src="http://applejack.ponychan.net/chan/files/thumb/138522502933s.png" />
                        </a>
                    </div>
                    <div class="postinfo">
                        <label>
                            <input type="checkbox" />
                            <span class="subject" tal:content="structure post/subject"/>
                                <span class="namespan">
                                    <span class="name" tal:content="post/display_name" /><span class="postertrip" tal:condition="post/display_tripcode">!${post/display_tripcode}</span>
                                </span>
                                <span class="mod">
                                    ## NeedUserAppFirst ##
                                </span>
                            <span class="datetime" tal:content="post/timestamp"/>
                                <span class="postnumber">
                                    <a href="${imgbb/base_url}/index.php?/${boardinfo/board_name}/${parent/id}-#${post/id}">
                                        No.
                                    </a>
                                    <a href="${imgbb/base_url}/pls" tal:content="post/id"/>
                                </span>
                        </label>
                    </div>
                    <blockquote class="postmessage" tal:content="structure post/message" />
                </div>
                <!--<tal:block tal:repeat="replycount repliescount/${parent/id}">-->
                    <!--<tal:block tal:repeat="reply replycount">-->
                        <!--${reply}-->
                    <!--</tal:block>-->
                <!--</tal:block>-->
            </div>
        </div>
    </div>
</tal:block>

<tal:block metal:define-macro="board">
    <div class="board">
        <tal:block tal:repeat="parent parents">
            <div id="two_${parent/id}" class="thread">
                <div class="postcontainer">
                    <div id="one_${parent/id}" class="post op">
                        <div class="file" tal:condition="parent/file">
                            <div class="fileinfo">
                                <span class="filetext">
                                    File:
                                    <a href="${imgbb/base_url}/files/src/${parent/file}.${parent/file_type}">
                                        ${parent/file}.${parent/file_type}
                                    </a>
                                    ${structure string: &ndash;} (${parent/file_size}, ${parent/image_h}x${parent/image_w}, ${parent/file_original}.${parent/file_type})
                                </span>
                            </div>
                            <a class="filethumb" target="_blank" href="${imgbb/base_url}/files/src/${parent/file}.${parent/file_type}">
                                <img src="http://applejack.ponychan.net/chan/files/thumb/138522502933s.png" />
                            </a>
                        </div>
                        <div class="postinfo">
                            <label>
                                <input type="checkbox" />
                                <span class="subject" tal:content="structure parent/subject"/>
                                <span class="namespan">
                                    <span class="name" tal:content="parent/display_name" /><span class="postertrip" tal:condition="parent/display_tripcode">!${parent/display_display_tripcode}</span>
                                </span>
                                <span class="mod">
                                    ## NeedUserAppFirst ##
                                </span>
                                <span class="datetime" tal:content="parent/timestamp"/>
                                <span class="postnumber">
                                    <a href="${imgbb/base_url}/index.php?/${boardinfo/board_name}/${parent/id}-#${parent/id}">
                                        No.
                                    </a>
                                    <a href="${imgbb/base_url}/pls" tal:content="parent/id"/>
                                </span>
                                <a href="${imgbb/base_url}/index.php?/${boardinfo/board_name}/${parent/id}">
                                    View
                                </a>
                            </label>
                        </div>
                        <blockquote class="postmessage" tal:content="structure parent/message" />
                    </div>
                    <tal:block tal:repeat="replycount repliescount/${parent/id}">
                        <tal:block tal:repeat="reply replycount">
                            ${reply}
                        </tal:block>
                    </tal:block>
                </div>
                <!--<tal:block tal:repeat="parentreplies replies/${parent/id}">-->
                    <div class="postcontainer" tal:repeat="reply replies/${parent/id}">
                        <div id="${reply/id}" class="post reply">
                            <!--helloWorld${parent/id}-->
                            <!--${repeat/reply/key}-->
                            <div class="postinfo">
                                <label>
                                    <input type="checkbox" />
                                    <span class="subject" tal:content="structure reply/subject"/>
                                    <span class="namespan">
                                        <span class="display_name">
                                            ${reply/display_name}</span><span class="postertrip" tal:condition="reply/display_display_tripcode">!${reply/display_tripcode}
                                        </span>
                                    </span>
                                    <span class="mod">
                                        ## NeedUserAppFirst ##
                                    </span>
                                    <span class="datetime" tal:content="reply/timestamp" />
                                    <span class="postnumber">
                                        <a href="${reply/id}#helpmeobizekenobi, yoou're my only hope">
                                            No.
                                        </a>
                                        <a href="${imgbb/base_url}/pls" tal:content="reply/id"/>
                                    </span>
                                </label>
                            </div>
                            <div class="file" tal:condition="reply/file">
                                <div class="fileinfo">
                                    <span class="filetext">
                                        File:
                                        <a href="${imgbb/base_url}/files/src/${reply/file}.${reply/file_type}">
                                            ${reply/file}.${reply/file_type}
                                        </a>
                                        ${structure string: &ndash;} (${reply/file_size}, ${reply/image_h}x${reply/image_w}, ${reply/file_original}.${reply/file_type})
                                    </span>
                                </div>
                                <a class="filethumb" target="_blank" href="${imgbb/base_url}/files/src/${reply/file}.${reply/file_type}">
                                    <img src="http://applejack.ponychan.net/chan/files/thumb/138522502933s.png" />
                                </a>
                            </div>
                            <blockquote class="postmessage" tal:content="structure reply/message"/>
                        </div>
                    </div>
                <!--</tal:block>-->
            </div>
            <hr />
        </tal:block>
    </div>
</tal:block>